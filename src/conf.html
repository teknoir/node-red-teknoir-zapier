<script type="text/javascript">
  RED.nodes.registerType('zapier_conf',{
      category: 'config',
      defaults: {
        token: {}
      },
      label: function() {
          return this.token;
      }
  });

  function uuidv4() {
  return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
  );
}

function generateToken() {
    document.getElementById("node-config-input-token").value = uuidv4()
}
function copyToken(){
  var copyText = document.getElementById("node-config-input-token");
  copyText.select();
  copyText.setSelectionRange(0, 99999); /*For mobile devices*/
  document.execCommand("copy");
  alert("Token copied to clipboard");
}
</script>

<script type="text/x-red" data-template-name="zapier_conf">

  <div id="token" style="display: inline-block; position: relative; width: 100%; height: 20px;">
  <div style="position: absolute; left: 0px; right: 0px;">
    <label for="node-config-input-token">Token</label>
    <input type="text" id="node-config-input-token" style="width:300px; position: relative; right: -25px; padding-left: 20px; ">
  </div>
  <a id="node-input-copy-token" title="Generate New Token" class="red-ui-button" style="position: relative; right: 0px; top: 25px;" onclick="generateToken()"><i class="fa fa-refresh"></i></a>
  <a id="node-input-copy-token" title="Copy Token to Clipboard" class="red-ui-button" style="position: relative; right: -300px; top: 25px;" onclick="copyToken()"><i class="fa fa-clipboard"></i></a>
</div>



</script>

<script type="text/x-red" data-help-name="zapier_conf">
  <p>TODO: Add help text</p>
</script>
